<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="google-signin-client_id" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</head>
	<style>
		html {
			font-family: Arial, Helvetica, sans-serif;
			text-align: center;
		}
	</style>
	<body>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script
			src="https://apis.google.com/js/platform.js?onload=init"
			async
			defer
		></script>
		<script>
			function checkLoginStatus() {
				var loginBtn = document.querySelector("#loginBtn");
				var nameTxt = document.querySelector("#name");
				if (gauth.isSignedIn.get()) {
					console.log("logined");
					loginBtn.value = "Logout";
					var profile = gauth.currentUser.get().getBasicProfile();
					console.log(profile);
					nameTxt.innerHTML = "Welcome " + profile.getName();
				} else {
					console.log("logouted");
					loginBtn.value = "Login";
					nameTxt.innerHTML = "";
				}
			}
			function init() {
				console.log("init");
				gapi.load("auth2", function () {
					console.log("auth2");
					window.gauth = gapi.auth2.init({
						client_id: "",
					});
					gauth.then(
						function () {
							console.log("googleAuth success");
							checkLoginStatus();
						},
						function () {
							console.log("googleAuth fail");
						}
					);
				});
			}
		</script>

		<a href="index.html">Go back</a>
		<span id="name"> </span>
		<input
			type="button"
			id="loginBtn"
			value="checking..."
			onclick="
  if(this.value === 'Login'){
    gauth.signIn({
      scope:'https://www.googleapis.com/auth/userinfo.email',
    }).then(function(){
      console.log('gauth.signIn()');
      checkLoginStatus();
    });
  } else {
    gauth.signOut().then(function(){
      console.log('gauth.signOut()');
      checkLoginStatus();
    });
  }
"
		/>
	</body>
</html>
